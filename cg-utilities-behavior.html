<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../cg-utils/cg-utils.html">

<script>
    var UtilitiesBehaviorImpl = {
        utils:CG.Utils,
        genId:function(){
            return CG.Utils.Randoms.id();
        },
        isGreaterThan:function(length, value){
            return length > value;
        },
        falses:function(conditions){
            var args = Array.prototype.slice.call(arguments);
            for(var i = 0; i < args.length; i++){
                if(args[i]){
                    return false;
                }
            }
            return true;
        },
        sub:function(a, b){
            return a - b;
        },
        add:function(a, b){
            var args = Array.prototype.slice.call(arguments);
            var total = 0;
            for(var i = 0; i < args.length; i++){
                total += Number(args[i]);
            }
            return total;
        },
        equals:function(a,b) {
            return a == b;
        },
        cssToNumber:function(css){
            return parseInt(css);
        },
        style:function(key,val){
            if(arguments.length % 2 != 0) return;
            var style = "";
            var args = Array.prototype.slice.call(arguments);
            for(var i = 0; i < args.length; i = i + 2){
                style += args[i] + ":" + args[i + 1] + ";";
            }
            return style;
        },
        getOrDefaults:function(o, path, defaultValue){
            return this.get(path, o) || defaultValue;
        },
        firstPropFound:function(o, paths){
            var args = Array.prototype.slice.call(arguments);
            args.splice(1,0,undefined);
            return this.firstPropFoundOrDefault.apply(this, args);
        },
        firstPropFoundOrDefault:function(o, defaultValue, paths){
            var args = Array.prototype.slice.call(arguments);
            var val;
            for(var i = 2;i < args.length; i++){
                val = this.get(args[i], o);
                if(val) break;
            }
            return val || defaultValue;
        },
        prop:function(o, path){
            var args = Array.prototype.slice.call(arguments);
            var o = args.shift();
            return this.get(args, o);
        },
        hasProp:function(o, path){
            var args = Array.prototype.slice.call(arguments);
            o = args.shift();
            return this.isDefined(this.get(args, o));
        },
        ifTrue:function(condition, trueValue, falseValue, commonValue){
            return (condition ? trueValue : falseValue) + (commonValue || "");
        },
        ifEqualsTo:function(a, b, trueValue, falseValue, commonValue){
            commonValue = commonValue || "";
            var args = Array.prototype.slice.call(arguments);
            trueValue = args[args.length - 2];
            falseValue = args[args.length - 1];
            for(var i = 0; i<args.length - 2; i += 2){
                if(args[i] != args[i+1]) {
                    return falseValue + commonValue;
                }
            }
            return trueValue + commonValue;
        },
        ifNotEqualsTo:function(a, b, trueValue, falseValue, commonValue){
            commonValue = commonValue || "";
            var args = Array.prototype.slice.call(arguments);
            trueValue = args[args.length - 2];
            falseValue = args[args.length - 1];
            for(var i = 0; i<args.length - 2; i += 2){
                if(args[i] == args[i+1]) {
                    return falseValue + commonValue;
                }
            }
            return trueValue + commonValue;
        },
        ifGreaterThan:function(a, b, trueValue, falseValue, commonValue){
            return (a > b ? trueValue : falseValue) + (commonValue || "");
        },
        ifLessThan:function(a, b, trueValue, falseValue, commonValue){
            return (a < b ? trueValue : falseValue) + (commonValue || "");
        },
        defaults:function(a, defaultValue){
            return this.isDefined(a) ? a : defaultValue;
        },
        isDefined:function(a){
            return a != undefined && a != null;
        },
        concat:function(str1, str2){
            return Array.prototype.slice.call(arguments).join('');
        },
        listenOnce: function(event, fn, args) {
            var self = this;
            var listener = function() {
                fn.apply(self, Array.prototype.slice.call(arguments).concat(args));
                this.removeEventListener(event, listener, false);
            };
            this.addEventListener(event, listener, false);
        },
        doWhenConditionIsMet:function(callback, condition, waitTime){
            if(!condition.call(this)) {
                this.debounce(this.constructor.name + "-waiting-for-condition", this.doWhenConditionIsMet.bind(this, callback, condition, waitTime), waitTime || 20)
            }else{
                callback.call(this);
            }
        },
        cancelEvent:function(e){
            e.stopPropagation();
            e.preventDefault();
        }
    };

    CG.UtilitiesBehavior = [UtilitiesBehaviorImpl];
</script>